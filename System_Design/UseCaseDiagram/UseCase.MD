# Поток событий
---

# Содержание
1 [Актёры](#actors)  
2 [Варианты использования](#use_case)  
2.1 [Авторизоваться](#auth)  
2.2 [Отправить сообщение](#send_message)  
2.3 [Сменить имя](#change_name)  
2.4 [Сменить адрес севрера](#change_adress)  
2.5 [Приостановить сервер](#stop_server)  
2.6 [Обработать пришедшее сообщение](#process_message)

<a name="actors"/>

# 1 Актёры

| Актёр |                Описание                 |
|:---:|:---------------------------------------:|
| Пользователь |      Человек, использующий систему      |
| Другие пользователи |       Люди, использующие систему        |
| Сервер | Хост обрабатывающий пришедшие сообщения |

<a name="use_case"/>

# 2 Варианты использования

Use Case диаграммы приложения "# Messeneger":
![Диалог добавления напоминания](/System_Design/DiagramPictures/UseCaseDiagram.png)


<a name="auth"/>

## 2.1 Авторизоваться
**Описание.** Вариант использования "Авторизоваться" позволяет пользователю пройти авторизацию путем ввода имени и адреса сервера для получения доступа к мессенджеру.

1. Вариант использования начинается, когда пользователь запускает приложение.
2. Для того чтобы получить доступ к мессенджеру нужно ввести свое имя и нажать на кнопку Connect.
3. Пользователь вводит IP адрес сервера.
4. Приложение выполняет запрос на подключение к серверу.
5. Если хост не найден приложение выводит сообщение об ошибке и переходит к пункту 2.
6. Конец варианта использования.

<a name="send_message"/>

## 2.2 Отправить сообщение

**Описание.** Вариант использования "Отправить сообщение" позволяет пользователю отправить текстовое сообщение в чат.  
**Предусловия.** Пользователь уже прошел вариант  использования "Авторизоваться".
1. Пользователь отправляет текствое сообщение, нажав на кнопку Send.
2. Сообщение приходит на сервер где обрабатывается и рассылается другим пользователям.
3. При наличии ошибок сервер посылает уведомление о том что произошла ошибка.
4. Конец варианта использования.


<a name="change_name"/>

## 2.3 Изменить имя

**Описание.** Вариант использования "Изменить имя " позволяет пользователю изменить имя во время использования мессенджера.
**Предусловия.** Пользователь уже прошел вариант  использования "Авторизоваться".
1. Пользователь нажимает на кнопку Change.
2. В появившемся окне пользователь пишет новое имя после чего нажимет на кнопку OK.
3. Посылается уведомление на сервер где происходит проверка на уникальность имени, в случае провала проверки, посылается уведомление о том что имя занято, если же проерка прошла успешно сервер переходит к следующему пункту.
4. Уведомление о смене имени посылается остальным пользователям.
5. Сервер сохраняет имя пользователя.
6. Конец варианта использования.


<a name="change_adress"/>

## 2.4 Сменить адрес севрера
**Описание.** Вариант использования "Сменить адрес севрера" позволяет хосту изменить стандартный адрес сервера.
1. Перед запуском сервера хост имеет возможность изменить адрес сервера.
2. Для этого нужно убрать галоки в соответствующих чекбоксах и написать нужно новый адрес.
3. При возникновении ошибки будет выведено уведомление.
4. Конец варианта использования.

<a name="stop_server"/>

## 2.5 Приостановить сервер

**Описание.** Вариант использования "Приостановить сервер" позволяет хосту приостановить сервер в любой момент времени.
1. Для приостановки работы сервера хост должен начать на кнопку Stop Server.
2. Если в момент приостановки работы сервера были пользователи, сервер посылает уведомление и пользователи отключаются от чата.
3. Возобновить работу сервера можно при нажатии кнопки Start Server.
4. Конец варианта использования.


<a name="process_message"/>

## 2.6 Обработать пришедшее сообщение

**Описание.** Вариант использования "Обработать пришедшее сообщение" позволяет серверу обрабатывать все пришедшие сообщение от пользователей и рассылать их.
1. Пользователь посылает сообщение на сервер.
2. Сервер производит обработку пришедшего сообщение где смотрит его тип: сообщение, уведомление о присоединении, уведомление о смене имени пользователя.
3. В зависимости от типа пришедшего сообщения сервер выполняет необходимые действия.
4. Конец варианта использования.
